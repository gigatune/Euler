<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>

<body>

<script>

// 回文数ならtrueを返す。回文数でないならfalseを返す。
function isPalindrome( num ){

    var targetString = convertToOddDigit( num );

    if( targetString.length == 1 ){
	return true;
    }

    var centerIndex = ( targetString.length / 2 ) - 1;

    var front = targetString.substr( 0, centerIndex + 1 );
    var last = targetString.substr( centerIndex + 1, targetString.length ).split("").reverse().join("") ;

    if( front == last ){
	return true;
    }
    return false;
}


// 桁数が奇数なら、回文数チェック用の偶数桁に変換する
function convertToOddDigit( num ){

    var stringNum = String(num);
    if(( stringNum.length % 2 ) == 0 ){
	return stringNum;
    }

    if( stringNum.length == 1 ){
	return ( stringNum + stringNum );
    }

    var digitCount = stringNum.length;
    var doubledIndex = Math.ceil( digitCount / 2 ) - 1 ;

    var oddDigitNum = stringNum.substr(0, doubledIndex + 1 );
    oddDigitNum += stringNum.substr( doubledIndex, doubledIndex );
    oddDigitNum += stringNum.substr( ( doubledIndex + 1 ), stringNum.length );

    return oddDigitNum;
}


// 1x1 ~ 999x999の範囲なので、探索範囲は1x1~1x999, 2x2~2x999, 3x3~3x999.... 999x999~9x999 とする

var searchMaxNumber = 999;
var palindoromes = array();

for( var x = searchMaxNumber ; x ; x-- ){
    for( var y = searchMaxNumber ; x <= y ; y-- ){
	var multi = x * y;
	if( isPalindrome( multi ) == true ){
	    palindoromes[0] = x;
	    palindoromes[1] = y;
	    x = y = 0;
	}
    }
}

var maxX = palindoromes[0];
var maxY = palindoromes[1];

alert( "MAX : " + maxX * maxY + " ( " + maxX + " x " + maxY + " ) " );

</script>
</body>
</html>
